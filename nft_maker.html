<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROYAL OASIS | FINAL NFT GENERATOR</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Cinzel:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #FCD535; --dark-bg: #0B0E11; --input-bg: #1E2329; }
        body { background: var(--dark-bg); color: #fff; font-family: 'Inter', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; margin: 0; }
        .admin-panel { background: var(--input-bg); padding: 25px; border-radius: 15px; margin: 20px 0; width: 95%; max-width: 500px; border: 1px solid #333; }
        h1 { font-family: 'Cinzel'; color: var(--gold); text-align: center; font-size: 20px; }
        label { display: block; font-size: 11px; color: #aaa; margin-top: 15px; text-transform: uppercase; }
        select, input { width: 100%; padding: 12px; margin-top: 8px; background: #000; border: 1px solid #444; color: #fff; border-radius: 8px; box-sizing: border-box; }
        .download-btn { width: 100%; padding: 18px; background: var(--gold); color: #000; font-weight: 900; border: none; cursor: pointer; border-radius: 8px; text-transform: uppercase; margin-top: 25px; font-size: 16px; transition: 0.3s; }
        
        /* NFT Design - BAYC Inspired */
        #nft-capture-area {
            width: 400px; height: 530px; background: #ffffff; border-radius: 20px;
            overflow: hidden; position: relative; color: #000;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }
        .img-box {
            width: 100%; height: 380px; display: flex; align-items: center; 
            justify-content: center; position: relative; transition: 0.5s;
        }
        /* গুরুত্বপূর্ণ: এখানে crossOrigin="anonymous" থাকতে হবে */
        .img-box img { width: 85%; height: 85%; object-fit: contain; z-index: 5; }

        .info-box { padding: 20px; background: #fff; height: 150px; box-sizing: border-box; }
        .verified { font-size: 11px; color: #666; font-weight: 700; display: flex; align-items: center; }
        .verified::after { content: ' ✔'; color: #1d9bf0; margin-left: 4px; font-size: 14px; }
        .title { font-size: 22px; font-weight: 900; margin: 5px 0; text-transform: uppercase; }
        .meta { display: flex; justify-content: space-between; margin-top: 15px; border-top: 1px solid #eee; padding-top: 12px; }
        .meta-item span { display: block; font-size: 9px; color: #999; font-weight: 700; text-transform: uppercase; }
        .meta-item b { font-size: 16px; }
    </style>
</head>
<body>

    <div class="admin-panel">
        <h1>ROYAL OASIS NFT ENGINE</h1>
        
        <label>সেকশন নির্বাচন করুন</label>
        <select id="speciesSelect" onchange="renderNFT()">
            <option value="9999" data-color="#FFD700" data-img="https://cdn-icons-png.flaticon.com/512/10545/10545419.png">Royal Oasis (Amur Leopard)</option>
            <option value="8999" data-color="#E5E4E2" data-img="https://cdn-icons-png.flaticon.com/512/3520/3520775.png">Tycoon Plaza (Javan Rhino)</option>
            <option value="5999" data-color="#00FFCC" data-img="https://cdn-icons-png.flaticon.com/512/4148/4148490.png">Gamer Studio (Axolotl)</option>
            <option value="7999" data-color="#CD7F32" data-img="https://cdn-icons-png.flaticon.com/512/4148/4148507.png">Crown Summit (Mountain Gorilla)</option>
            <option value="6999" data-color="#FFA500" data-img="https://cdn-icons-png.flaticon.com/512/10545/10545412.png">Elite Legacy (Sumatran Elephant)</option>
            <option value="4999" data-color="#87CEEB" data-img="https://cdn-icons-png.flaticon.com/512/2906/2906233.png">Heritage Vault (Vaquita)</option>
            <option value="3999" data-color="#FF4500" data-img="https://cdn-icons-png.flaticon.com/512/10545/10545419.png">Global Horizon (Bengal Tiger)</option>
        </select>

        <label>মালিকের নাম</label>
        <input type="text" id="ownerIn" placeholder="Emirates Group" oninput="renderNFT()">

        <label>প্লট আইডি</label>
        <input type="text" id="plotIn" placeholder="OASIS-01" oninput="renderNFT()">

        <button class="download-btn" onclick="downloadImage()">Download NFT Image</button>
    </div>

    <div id="nft-capture-area">
        <div class="img-box" id="nftBg">
            <img id="nftImg" src="" crossorigin="anonymous">
        </div>
        <div class="info-box">
            <div class="verified" id="collName">Royal Oasis V2</div>
            <div class="title" id="ownerName">OWNER NAME</div>
            <div class="meta">
                <div class="meta-item">
                    <span>Plot ID</span>
                    <b id="plotVal">#000</b>
                </div>
                <div class="meta-item" style="text-align: right;">
                    <span>Price</span>
                    <b id="priceVal">$0,000</b>
                </div>
            </div>
        </div>
    </div>

    <script>
        function renderNFT() {
            const select = document.getElementById('speciesSelect');
            const opt = select.options[select.selectedIndex];
            
            // ছবি ও কালার সেট
            document.getElementById('nftBg').style.backgroundColor = opt.getAttribute('data-color');
            document.getElementById('nftImg').src = opt.getAttribute('data-img');
            
            // টেক্সট সেট
            document.getElementById('collName').innerText = opt.text.split(' (')[0];
            document.getElementById('priceVal').innerText = "$" + opt.value;
            document.getElementById('ownerName').innerText = (document.getElementById('ownerIn').value || "OWNER NAME").toUpperCase();
            document.getElementById('plotVal').innerText = "#" + (document.getElementById('plotIn').value || "000").toUpperCase();
        }

        async function downloadImage() {
            const btn = document.querySelector('.download-btn');
            btn.innerText = "প্রসেসিং হচ্ছে...";
            
            const area = document.getElementById('nft-capture-area');
            
            // ছবির সোর্স লোড হওয়া পর্যন্ত অপেক্ষা
            await new Promise(r => setTimeout(r, 500));

            html2canvas(area, {
                useCORS: true, 
                allowTaint: false,
                scale: 3, // হাই কোয়ালিটির জন্য
                backgroundColor: null
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `NFT-${document.getElementById('plotIn').value || 'Oasis'}.png`;
                link.href = canvas.toDataURL("image/png");
                link.click();
                btn.innerText = "Download NFT Image";
            }).catch(err => {
                console.error("Error:", err);
                alert("ডাউনলোড ব্যর্থ হয়েছে! অনুগ্রহ করে আবার চেষ্টা করুন।");
                btn.innerText = "Download NFT Image";
            });
        }

        window.onload = renderNFT;
    </script>
</body>
</html>
