<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROYAL OASIS | ARK ENTERPRISE</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root { 
            --bg: #050505; 
            --royal-emerald: #00ffcc;
            --gold: #D4AF37;
            --border: rgba(212, 175, 55, 0.2);
            --glass: rgba(255, 255, 255, 0.05);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--bg); color: #fff; font-family: 'Montserrat', sans-serif; overflow-x: hidden; }
        
        /* Header Fix */
        header { 
            position: fixed; top: 0; width: 100%; padding: 15px 5%; 
            display: flex; justify-content: space-between; align-items: center; 
            z-index: 5000; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); 
            border-bottom: 1px solid var(--border); 
        }
        
        .company-name { font-family: 'Cinzel'; font-size: 18px; color: var(--gold); letter-spacing: 2px; font-weight: 900; }
        .buy-plot-btn { 
            background: var(--gold); color: #000; padding: 10px 20px; 
            font-family: 'Cinzel'; font-weight: 900; font-size: 11px; 
            border: none; cursor: pointer; border-radius: 4px;
        }

        .section-intro { padding: 120px 6% 20px; text-align: center; }
        .section-intro h1 { font-family: 'Cinzel'; font-size: 35px; letter-spacing: 10px; color: var(--royal-emerald); }

        /* Grid for 35 Plots */
        .oasis-container { 
            max-width: 1200px; margin: 0 auto; padding: 30px 20px; 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; 
        }
        
        .plot-unit { 
            aspect-ratio: 1/1; background: var(--glass); border: 1px solid var(--border); 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            position: relative; cursor: pointer; transition: 0.3s; 
        }
        .plot-unit:hover { border-color: var(--royal-emerald); background: rgba(0, 255, 204, 0.05); }
        .plot-unit.sold { border-color: #ff0033; opacity: 0.5; cursor: not-allowed; }
        
        .plot-id { font-family: 'Cinzel'; font-size: 12px; color: var(--gold); }
        .plot-price { font-size: 11px; color: #fff; margin-top: 5px; font-family: 'Cinzel'; }

        /* Modal Overlay */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.95); z-index: 10000; display: none; 
            align-items: center; justify-content: center; padding: 20px;
        }
        .modal-box { 
            background: #0a0a0a; border: 1px solid var(--gold); padding: 30px; 
            width: 100%; max-width: 400px; text-align: center; 
        }
        .modal-box input { 
            width: 100%; padding: 12px; margin: 15px 0; 
            background: #111; border: 1px solid #333; color: #fff; outline: none; 
        }
        .action-btn { 
            width: 100%; padding: 15px; background: var(--gold); 
            color: #000; border: none; font-family: 'Cinzel'; font-weight: 900; 
            cursor: pointer; 
        }

        @media (max-width: 768px) {
            .oasis-container { grid-template-columns: repeat(3, 1fr); gap: 8px; }
            .section-intro h1 { font-size: 24px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="company-name">ARK ENTERPRISE</div>
        <button class="buy-plot-btn" onclick="openModal()">BUY PLOT</button>
    </header>

    <section class="section-intro">
        <h1>ROYAL OASIS</h1>
        <p style="color:var(--gold); font-size: 11px; letter-spacing: 2px;">35 EXCLUSIVE LEGACY PLOTS</p>
    </section>

    <main class="oasis-container" id="plots-grid"></main>

    <div id="booking-modal" class="modal-overlay">
        <div class="modal-box">
            <h3 style="color:var(--gold); font-family:'Cinzel';">RESERVE PLOT</h3>
            <input type="text" id="mBrand" placeholder="YOUR BRAND NAME">
            <input type="number" id="mPlot" placeholder="PLOT NUMBER (1-35)">
            <button class="action-btn" onclick="submitInquiry()">SUBMIT REQUEST</button>
            <p onclick="closeModal()" style="color:#555; margin-top:15px; cursor:pointer; font-size:10px;">CANCEL</p>
        </div>
    </div>

    <div id="success-popup" class="modal-overlay">
        <div class="modal-box" id="success-content"></div>
    </div>

    <script>
        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó
        const firebaseConfig = {
            apiKey: "AIzaSyCAdnfu2R82xbC7H85n_9mvQBE58X3TjbA",
            authDomain: "the-5k-elite-legacy.firebaseapp.com",
            databaseURL: "https://the-5k-elite-legacy-default-rtdb.firebaseio.com",
            projectId: "the-5k-elite-legacy",
            storageBucket: "the-5k-elite-legacy.firebasestorage.app",
            messagingSenderId: "440824313752",
            appId: "1:440824313752:web:2c93344dcfe2ba0a4c5ded"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ‡ßß. ‡¶ó‡ßç‡¶∞‡¶ø‡¶° ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶≤‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
        function initOasis() {
            // 'royal_oasis' ‡¶™‡¶æ‡¶• ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡¶ø‡ßü‡ßá ‡¶Ü‡¶∏‡¶æ (‡¶≤‡¶æ‡¶á‡¶≠ ‡¶™‡ßç‡¶≤‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
            db.ref('royal_oasis').on('value', (snapshot) => {
                const data = snapshot.val() || {};
                const grid = document.getElementById('plots-grid');
                grid.innerHTML = '';

                for (let i = 1; i <= 35; i++) {
                    const id = `ROYAL-${i < 10 ? '0' + i : i}`;
                    const isSold = data[id] ? true : false;
                    
                    // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶∏‡¶ø‡¶Ç ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ (‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶∞‡ßã $99, ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶ï‡¶Æ‡¶¨‡ßá)
                    const row = Math.floor((i - 1) / 5);
                    let price = 39;
                    if(row === 0) price = 99;
                    else if(row === 1) price = 89;
                    else if(row === 2) price = 59;

                    const div = document.createElement('div');
                    div.className = `plot-unit ${isSold ? 'sold' : ''}`;
                    div.onclick = isSold ? null : () => openModal(i);
                    div.innerHTML = `
                        <span class="plot-id">${id}</span>
                        <span class="plot-price">${isSold ? 'SOLD' : '$' + price}</span>
                        <i class="fa-solid fa-gem" style="margin-top:10px; opacity:0.2;"></i>
                    `;
                    grid.appendChild(div);
                }
            });
        }

        // ‡ß®. ‡¶Æ‡¶°‡¶æ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function openModal(n = "") {
            document.getElementById('mPlot').value = n;
            document.getElementById('booking-modal').style.display = 'flex';
        }
        function closeModal() {
            document.getElementById('booking-modal').style.display = 'none';
        }

        // ‡ß©. ‡¶á‡¶®‡¶ï‡ßã‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü (Admin Panel-‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
        function submitInquiry() {
            const name = document.getElementById('mBrand').value;
            const plotNum = document.getElementById('mPlot').value;
            
            if (!name || !plotNum || plotNum < 1 || plotNum > 35) {
                return alert("Please enter valid details!");
            }
            
            const id = `ROYAL-${plotNum < 10 ? '0' + plotNum : plotNum}`;

            // ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏‡ßá‡¶∞ 'orders' ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡ßü
            db.ref('orders/' + id).set({
                name: name,
                plotID: id,
                section: "Royal Oasis",
                timestamp: Date.now()
            }).then(() => {
                showSuccess(name, id);
            });
        }

        // ‡ß™. ‡¶∏‡¶æ‡¶ï‡¶∏‡ßá‡¶∏ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶ì ‡¶ï‡¶®‡¶´‡ßá‡¶ü‡¶ø
        function showSuccess(name, id) {
            closeModal();
            const popup = document.getElementById('success-popup');
            const content = document.getElementById('success-content');
            
            // ‡¶Ö‡¶ü‡ßã ‡¶π‡ßã‡¶Ø‡¶º‡¶æ‡¶ü‡¶∏‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï
            const waMsg = encodeURIComponent(`Hi ARK Support, I want to confirm my plot.\nBrand: ${name}\nPlot: ${id}`);
            const waLink = `https://wa.me/8801576940717?text=${waMsg}`;

            content.innerHTML = `
                <h2 style="color:var(--gold); font-family:'Cinzel';">SUCCESS! üéâ</h2>
                <p style="margin:15px 0;">${name}, Your request for ${id} is submitted.</p>
                <button class="action-btn" onclick="window.open('${waLink}', '_blank')">CONTACT SUPPORT</button>
                <button class="action-btn" onclick="location.reload()" style="background:transparent; color:#555; border:1px solid #333; margin-top:10px;">CLOSE</button>
            `;
            
            popup.style.display = 'flex';
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#D4AF37', '#00ffcc'] });
        }

        window.onload = initOasis;
    </script>
</body>
</html>
