<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE IMPERIAL 100 | ABSOLUTE ESTATE</title>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, ref, onValue, set, update } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCAdnfu2R82xbC7H85n_9mvQBE58X3TjbA",
            authDomain: "the-5k-elite-legacy.firebaseapp.com",
            databaseURL: "https://the-5k-elite-legacy-default-rtdb.firebaseio.com",
            projectId: "the-5k-elite-legacy",
            storageBucket: "the-5k-elite-legacy.firebasestorage.app",
            messagingSenderId: "440824313752",
            appId: "1:440824313752:web:2c93344dcfe2ba0a4c5ded",
            measurementId: "G-6KEYY60YGG"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        window.db = db;
        window.dbRef = ref;
        window.dbUpdate = update;
    </script>

    <style>
        :root {
            --gold: #D4AF37;
            --black: #050505;
            --white: #ffffff;
            --border: #222;
        }

        body {
            margin: 0; background: var(--black); color: var(--white);
            font-family: 'Times New Roman', serif; overflow-x: hidden;
        }

        /* --- Master Header --- */
        .master-header {
            padding: 70px 20px; text-align: center; border-bottom: 0.5px solid var(--border);
            background: linear-gradient(to bottom, #000, #0a0a0a);
        }
        .master-header h1 { font-size: clamp(24px, 5vw, 45px); letter-spacing: 15px; text-transform: uppercase; color: var(--gold); margin: 0; }
        
        .view-nav { display: flex; justify-content: center; gap: 15px; margin-top: 35px; }
        .nav-link { 
            background: none; border: 1px solid var(--gold); color: var(--gold); 
            padding: 10px 20px; cursor: pointer; font-size: 9px; letter-spacing: 3px; 
            text-transform: uppercase; transition: 0.4s;
        }
        .nav-link.active { background: var(--gold); color: #000; }

        .view-section { display: none; padding: 40px 20px; animation: fadeIn 0.6s ease-out; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- Canvas Grid (10x10) --- */
        .grid-container { display: flex; justify-content: center; }
        .imperial-grid {
            display: grid; grid-template-columns: repeat(10, 1fr); gap: 10px;
            background: #000; padding: 15px; border: 1px solid var(--gold);
        }
        .plot {
            width: 85px; height: 85px; background: #080808; border: 1px solid #222;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s;
        }
        .plot:hover { border-color: var(--gold); transform: scale(1.05); z-index: 5; }
        .plot span { font-size: 8px; opacity: 0.4; }
        .plot b { font-size: 9px; color: var(--gold); margin-top: 5px; }

        /* --- Drawer / Order System --- */
        #order-drawer {
            position: fixed; right: -450px; top: 0; width: 400px; height: 100vh;
            background: var(--white); color: var(--black); z-index: 9999;
            transition: 0.7s cubic-bezier(0.19, 1, 0.22, 1); padding: 80px 40px; box-sizing: border-box;
        }
        #order-drawer.open { right: 0; }
        .drawer-close { position: absolute; top: 40px; left: 40px; cursor: pointer; font-size: 10px; border-bottom: 1px solid #000; }

        .btn-action {
            width: 100%; padding: 20px; background: var(--black); color: #fff;
            border: none; margin-top: 40px; cursor: pointer; font-size: 10px; letter-spacing: 3px; font-weight: bold;
        }

        /* --- Dashboard UI --- */
        .dash-container { max-width: 550px; margin: 0 auto; background: #111; padding: 40px; border: 1px solid #222; }
        .dash-input { width: 100%; padding: 15px; margin-bottom: 20px; background: #000; border: 1px solid #333; color: #fff; box-sizing: border-box; }

        /* --- Support UI --- */
        .support-wrap { text-align: center; max-width: 500px; margin: 0 auto; }
        .wa-btn { display: inline-block; color: var(--gold); border: 1px solid var(--gold); padding: 15px 40px; text-decoration: none; letter-spacing: 3px; font-size: 12px; margin-top: 20px; }

        @media (max-width: 768px) {
            .imperial-grid { grid-template-columns: repeat(5, 1fr); gap: 6px; }
            .plot { width: 60px; height: 60px; }
            #order-drawer { width: 100%; }
        }
    </style>
</head>
<body>

    <header class="master-header">
        <h1>The Imperial 100</h1>
        <nav class="view-nav">
            <button class="nav-link active" onclick="switchView('canvas')">The Grid</button>
            <button class="nav-link" onclick="switchView('dashboard')">Management</button>
            <button class="nav-link" onclick="switchView('support')">Concierge</button>
        </nav>
    </header>

    <div id="canvas" class="view-section active">
        <div class="grid-container">
            <div class="imperial-grid" id="grid"></div>
        </div>
    </div>

    <div id="dashboard" class="view-section">
        <div class="dash-container">
            <h3 style="color:var(--gold); letter-spacing:4px; text-transform:uppercase;">Update Protocol</h3>
            <p style="font-size:11px; opacity:0.6; margin-bottom:30px;">$9 modification fee applies per update.</p>
            
            <input type="text" id="up-id" class="dash-input" placeholder="PLOT ID (e.g. #05)">
            <input type="text" id="up-title" class="dash-input" placeholder="BRAND NAME">
            <input type="url" id="up-url" class="dash-input" placeholder="REDIRECT URL">
            <input type="text" id="up-img" class="dash-input" placeholder="IMAGE ASSET URL">
            
            <button class="btn-action" style="background:var(--gold); color:#000;" onclick="submitUpdate()">Request Modification</button>
        </div>
    </div>

    <div id="support" class="view-section">
        <div class="support-wrap">
            <h2 style="color:var(--gold); letter-spacing:5px;">OFFICIAL SUPPORT</h2>
            <p style="font-size:13px; opacity:0.7; line-height:2;">Direct access to the Sovereign Archive concierge for payment verification and manual onboarding.</p>
            <a href="https://wa.me/8801576940717" class="wa-btn">CONTACT VIA WHATSAPP</a>
        </div>
    </div>

    <div id="order-drawer">
        <div class="drawer-close" onclick="closeDrawer()">[ CLOSE ]</div>
        <div style="margin-top:60px;">
            <p style="font-size:10px; color:#aaa; letter-spacing:2px;">CROWN JEWEL ASSET</p>
            <h2 id="sel-id" style="font-size:30px; margin:10px 0;">#00</h2>
            
            <p style="font-size:10px; color:#aaa; letter-spacing:2px; margin-top:40px;">ESTATE VALUE</p>
            <h2 style="font-size:45px; color:var(--gold); margin:0;">$999</h2>

            <div style="margin-top:50px; padding:20px; background:#f9f9f9; font-size:11px; color:#666; line-height:1.7;">
                <b>ACQUISITION TERMS:</b><br>
                This plot is a permanent addition to the archive. All assets must be high-resolution. Update fee: $9.
            </div>

            <button class="btn-action" onclick="sendOrder()">Initiate Acquisition</button>
        </div>
    </div>

    <script>
        // Switch between Canvas, Dashboard, and Support
        function switchView(viewId) {
            document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            event.target.classList.add('active');
        }

        // Generate Grid
        const grid = document.getElementById('grid');
        for (let i = 1; i <= 100; i++) {
            const plot = document.createElement('div');
            plot.className = 'plot';
            plot.innerHTML = `<span>#${i.toString().padStart(2, '0')}</span><b>$999</b>`;
            plot.onclick = () => openDrawer(i);
            grid.appendChild(plot);
        }

        // Drawer Controls
        function openDrawer(id) {
            document.getElementById('sel-id').innerText = "#" + id.toString().padStart(2, '0');
            document.getElementById('order-drawer').classList.add('open');
        }
        function closeDrawer() {
            document.getElementById('order-drawer').classList.remove('open');
        }

        // External Link Flows
        function sendOrder() {
            const id = document.getElementById('sel-id').innerText;
            const msg = `I wish to acquire Imperial Plot ${id} for $999. Please provide registration steps.`;
            window.open(`https://wa.me/8801576940717?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function submitUpdate() {
            const id = document.getElementById('up-id').value;
            if(!id) return alert("Please specify Plot ID.");
            const msg = `I want to update my Imperial Plot ${id}. I understand the $9 update fee applies.`;
            window.open(`https://wa.me/8801576940717?text=${encodeURIComponent(msg)}`, '_blank');
        }
    </script>
</body>
</html>
