<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CROWN SUMMIT | 100 ELITE PLOTS</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #050505;
            --gold: #D4AF37;
            --gold-low: rgba(212, 175, 55, 0.2);
            --border-color: rgba(212, 175, 55, 0.3);
            --glass: rgba(255, 255, 255, 0.02);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: var(--bg); color: #fff; font-family: 'Montserrat', sans-serif; 
            overflow: hidden; height: 100vh;
        }

        /* Architectural Grid Background */
        .blueprint-bg {
            position: fixed; inset: 0;
            background-image: 
                linear-gradient(var(--border-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--border-color) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: -1; opacity: 0.1;
        }

        .header-nav {
            position: fixed; top: 0; width: 100%; padding: 25px 40px;
            display: flex; justify-content: space-between; align-items: center; z-index: 1000;
            background: linear-gradient(to bottom, #000, transparent);
        }

        .nav-back {
            text-decoration: none; color: var(--gold); font-family: 'Cinzel';
            font-size: 11px; letter-spacing: 2px; display: flex; align-items: center; gap: 10px;
        }

        /* Map UI */
        .map-viewport {
            height: 100vh; width: 100vw; display: flex; justify-content: center;
            align-items: center; overflow: auto; padding: 100px;
            perspective: 1500px;
        }

        .plot-canvas {
            display: grid;
            grid-template-columns: repeat(10, 100px); /* 100x100 Plots */
            grid-template-rows: repeat(10, 100px);
            gap: 15px;
            transform: rotateX(20deg);
            padding: 50px;
        }

        /* Individual Plot Design */
        .plot {
            width: 100px; height: 100px;
            background: var(--glass);
            border: 1px solid var(--border-color);
            position: relative; cursor: pointer;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        /* Corner Rows Highlight (Your $99 Strategy) */
        .plot.premium { border: 1px solid var(--gold); background: rgba(212, 175, 55, 0.05); }

        .plot:hover {
            transform: scale(1.2) translateZ(50px);
            background: var(--gold); color: #000;
            box-shadow: 0 0 40px var(--gold); z-index: 100;
        }

        .plot-id { font-family: 'Cinzel'; font-size: 10px; font-weight: bold; position: absolute; top: 8px; left: 8px; opacity: 0.6; }
        .plot-size { font-size: 8px; position: absolute; bottom: 8px; right: 8px; opacity: 0.4; }
        .plot i { font-size: 20px; margin-bottom: 5px; opacity: 0.3; }

        /* Sold State */
        .plot.sold { border-color: #fff; background: rgba(255, 255, 255, 0.1); }
        .plot.sold .plot-id { opacity: 1; color: #fff; }
        .plot.sold i { opacity: 1; color: var(--gold); }

        /* Floating Info Box */
        .info-panel {
            position: fixed; bottom: 40px; right: 40px; width: 320px;
            background: rgba(10, 10, 10, 0.95); border: 1px solid var(--gold-low);
            padding: 25px; backdrop-filter: blur(20px); opacity: 0;
            transform: translateY(20px); transition: 0.4s; pointer-events: none; z-index: 2000;
        }
        .plot:hover ~ .info-panel, .info-panel:hover { opacity: 1; transform: translateY(0); pointer-events: all; }

        .p-img { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--gold); margin-bottom: 15px; background: #111; object-fit: cover; }
        .p-name { font-family: 'Cinzel'; color: var(--gold); font-size: 18px; margin-bottom: 5px; }
        .p-price { font-size: 12px; font-weight: 600; color: #00ff00; letter-spacing: 1px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="blueprint-bg"></div>

    <header class="header-nav">
        <a href="index.html" class="nav-back"><i class="fa-solid fa-arrow-left"></i> THE ETERNAL ARK</a>
        <div style="text-align: right;">
            <p style="font-family:'Cinzel'; font-size:12px; color:var(--gold); letter-spacing:3px;">CROWN SUMMIT</p>
            <p style="font-size: 8px; color: #555;">100 EXCLUSIVE PLOTS | 100x100 DIMENSION</p>
        </div>
    </header>

    <div class="map-viewport">
        <div class="plot-canvas" id="plotGrid">
            </div>

        <div class="info-panel" id="infoPanel">
            <img src="" id="infoImg" class="p-img">
            <h3 id="infoName" class="p-name">VACANT PLOT</h3>
            <p id="infoPrice" class="p-price">$99.00</p>
            <p id="infoMsg" style="font-size: 12px; color: #ccc; line-height: 1.5;">This elite space is available for reservation. Own your 100x100 legacy today.</p>
            <a href="#" id="infoLink" target="_blank" style="display:none; margin-top:15px; color:var(--gold); font-size:11px;">VISIT GUARDIAN'S LINK â†’</a>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCAdnfu2R82xbC7H85n_9mvQBE58X3TjbA",
            authDomain: "the-5k-elite-legacy.firebaseapp.com",
            databaseURL: "https://the-5k-elite-legacy-default-rtdb.firebaseio.com",
            projectId: "the-5k-elite-legacy",
            storageBucket: "the-5k-elite-legacy.firebasestorage.app",
            messagingSenderId: "440824313752",
            appId: "1:440824313752:web:2c93344dcfe2ba0a4c5ded"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const grid = document.getElementById('plotGrid');
        const infoName = document.getElementById('infoName');
        const infoPrice = document.getElementById('infoPrice');
        const infoImg = document.getElementById('infoImg');
        const infoLink = document.getElementById('infoLink');
        const infoMsg = document.getElementById('infoMsg');

        onValue(ref(db, 'crown_summit'), (snapshot) => {
            const data = snapshot.val() || {};
            renderPlots(data);
        });

        function renderPlots(data) {
            grid.innerHTML = '';
            for (let i = 1; i <= 100; i++) {
                const plot = document.createElement('div');
                plot.className = 'plot';
                const pData = data[i];

                // Price Logic based on your strategy
                let price = 39;
                const row = Math.ceil(i / 10);
                const col = i % 10 === 0 ? 10 : i % 10;
                
                if (row === 1 || row === 10 || col === 1 || col === 10) {
                    price = 99; // First four corner rows/edges
                    plot.classList.add('premium');
                } else if (row === 2 || row === 9 || col === 2 || col === 9) {
                    price = 89; // Second row
                } else if (row === 3 || row === 8 || col === 3 || col === 8) {
                    price = 59; // Third row (Reserved)
                }

                plot.innerHTML = `<span class="plot-id">CS-${i}</span>
                                 <i class="fa-solid ${pData ? 'fa-crown' : 'fa-vector-square'}"></i>
                                 <span class="plot-size">100x100 PX</span>`;

                if (pData) plot.classList.add('sold');

                plot.onmouseenter = () => {
                    if (pData) {
                        infoName.innerText = pData.name;
                        infoPrice.innerText = "OWNED";
                        infoPrice.style.color = "#D4AF37";
                        infoImg.src = pData.image;
                        infoImg.style.display = 'block';
                        infoMsg.innerText = pData.message || "Elite Guardian of the Ark.";
                        infoLink.href = pData.link;
                        infoLink.style.display = 'block';
                    } else {
                        infoName.innerText = "PLOT CS-" + i;
                        infoPrice.innerText = "$" + price + ".00";
                        infoPrice.style.color = "#00ff00";
                        infoImg.style.display = 'none';
                        infoMsg.innerText = "Available Plot. Size: 100x100 Dimension. High-value location.";
                        infoLink.style.display = 'none';
                    }
                };
                grid.appendChild(plot);
            }
        }
    </script>
</body>
</html>
